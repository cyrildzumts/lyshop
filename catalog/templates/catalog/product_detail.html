{% extends "catalog_base.html"%}
{% load i18n %}
{% block  HEADER_BANNER_TITLE %}
    <h4> {{product.display_name}}</h4>
{% endblock HEADER_BANNER_TITLE %}

{% block MAIN %}
<div class="container">
  <ul class="row">
    {% if product.category.parent %}
    <li class="mat-button"><a href="{{product.category.parent.get_absolute_url}}"><span>{% trans product.category.parent.display_name %}</span><span></span></a></li>

    {% endif %}
    <li class="mat-button"><a href="{{product.category.get_absolute_url}}">{% trans product.category.display_name %}</a></li>
  </ul>
  <div class="container">
    <div class="col-m-12 col-3">
      <div class="container">
        <div class="wrapper full kiosk">
            <div class="row">
              <div class="img-wrapper">
                <img id="main-image" class="img-responsive" src="{{product.images.first.get_image_url}}" alt="">
              </div>
            </div>

            <div class="row">
            {% for image in image_list %}
              <div class="img-wrapper col-3 kiosk-image-wrapper">
                <img  class="img-responsive js-select-image kiosk-image" src="{{image.get_image_url}}" alt="">
              </div>
            {% endfor %}
            </div>
         </div><!--End of wrapper-->
      </div><!--container-->
    </div><!--End of col-8-->
    <div class="col-m-12 col-4">
      <div class="container">
        <div class="wrapper full">
            <form id="add-cart-form" action="{% url 'cart:cart-add' %}" method="POST">{% csrf_token %}
            <input type="hidden" name="product" value="{{product.product_uuid}}">
            {% if selective_attrs|length == 1 %}<input type="hidden" name="variant_uuid" value="{{selective_attrs.0.variant_uuid}}">{% endif %}
            
            <div class="product-detail-properties left">
                
                   <div class="left">
                      <div class="title left">
                        <span>{{product.display_name}}</span>
                      </div>
                      <div class="brand">
                        <span class="value">{{product.brand.display_name}}</span>
                      </div>
                      <div class="price">
                        <span class="emphasis">{{product.price}} {% trans "XAF" %}</span>
                      </div>
                      <ul class="mat-list">
                          {% for attr in common_attrs %}
                            <li class="attr-wrapper">
                            <div class="attr entry">
                              <span class="key">{% trans attr.display_name %}</span><span class="value">{{attr.value}}</span>
                              <input type="hidden" name="attr" value="{{attr.id}}">
                            </div>
                            </li>
                          {% endfor %}
                          {% if selective_attrs|length > 1 %}
                          <li class="attr-wrapper">
                            <div class="attr entry">
                              <span class="key">{% trans "Option" %}</span>
                              <select id="selective-attr" name="variant_uuid" class="value" >
                                  <option value=""></option>
                              {% for attr in selective_attrs %}
                                  {% for attribute in attr.attrs %}
                                  <option value="{{attr.variant_uuid}}">{{attribute}}</option>
                                  {% endfor %}
                                
                              {% endfor %}
                              </select>
                            </div>
                          </li>
                          {% endif %}
                          <li class="attr-wrapper">
                            <div class="attr description entry">
                                <span class="key">{% trans "Description" %}</span>
                                <p class="value">{{product.description}}</p>
                            </div>
                          </li>
                      </ul>
                
                </div>
                <div class="actions">
                  <button type="submit" class="mat-button mat-button-default js-add-to-cart">
                  <i class="icon fas fa-shopping-cart"></i>
                  <span class="">{% trans "Add to Cart" %}</span>
                  </button>
                </div>
            </div><!--End of product detail-->
            </form>
            <div class="box-content">
                          
            </div><!--End of content-->
        </div><!--End of mat-box-->
      </div><!--End of container-->
    </div><!--End of col-4 -->
    {% if variant_list %}

    <div class="col-m-12 col-12">
      <div class="mat-box">
            <h4>{% trans "Variants" %}</h4>
            <div class="mat-box-content">
              <div class="mat-list-wrapper">
                  <ul class="mat-list">
                      {% for v in variant_list %}
                        <li class="matt-list-item"><a class="mat-button mat-button-text" href="{{v.get_absolute_url}}">{{v.display_name}}</a></li>
                      {% endfor %}
                  </ul>
              </div><!--End of wrapper-->
            </div><!--End of content-->
        </div><!--End of mat-box-->
    </div><!--End of col-12-->
    {% endif %}
  </div><!--End of row-->
</div>
{% endblock MAIN %}